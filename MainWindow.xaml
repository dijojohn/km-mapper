<Window x:Class="InputMonitorMapper.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Keyboard &amp; Mouse → Monitor"
        Height="620" Width="500"
        MinHeight="520" MinWidth="420"
        WindowStartupLocation="CenterScreen"
        Closing="Window_Closing">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="Single mouse: lock to one monitor"
                   FontWeight="SemiBold" FontSize="13" Margin="0,0,0,6"/>

        <GroupBox Grid.Row="1" Header="Monitors" Padding="8" Margin="0,0,0,8">
            <ListBox x:Name="MonitorList"
                     SelectionMode="Single"
                     DisplayMemberPath="DisplayName"
                     SelectionChanged="MonitorList_SelectionChanged"
                     MouseDoubleClick="MonitorList_MouseDoubleClick"/>
        </GroupBox>

        <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,0,0,8">
            <Button x:Name="LockButton" Content="Lock to selected monitor"
                    Click="LockButton_Click" IsEnabled="False"/>
            <Button x:Name="UnlockButton" Content="Unlock mouse"
                    Click="UnlockButton_Click" Margin="8,0,0,0" IsEnabled="False"/>
        </StackPanel>

        <TextBlock Grid.Row="3" x:Name="StatusText" Text="Select a monitor and click Lock."
                   Foreground="Gray" FontSize="12" TextWrapping="Wrap" Margin="0,0,0,16"/>

        <Separator Grid.Row="4" Margin="0,0,0,8"/>

        <TextBlock Grid.Row="5" Text="Two mice: bind each mouse to a different monitor"
                   FontWeight="SemiBold" FontSize="13" Margin="0,4,0,4"/>

        <GroupBox Grid.Row="6" Header="Mouse → Monitor" Padding="8" Margin="0,0,0,8">
            <StackPanel>
                <TextBlock Text="Assign each mouse to a monitor. Then click Enable multi-mouse."
                           Foreground="Gray" FontSize="11" TextWrapping="Wrap" Margin="0,0,0,8"/>
                <ListBox x:Name="MouseAssignmentsList" Height="100">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Margin="0,2">
                                <TextBlock Text="{Binding Mouse.Name}" VerticalAlignment="Center" Width="220" TextTrimming="CharacterEllipsis"/>
                                <TextBlock Text=" → " VerticalAlignment="Center"/>
                                <ComboBox ItemsSource="{Binding Monitors}"
                                          SelectedItem="{Binding SelectedMonitor}"
                                          DisplayMemberPath="DisplayName"
                                          Width="200" Margin="4,0,0,0"
                                          VerticalAlignment="Center"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </StackPanel>
        </GroupBox>

        <StackPanel Grid.Row="7" Orientation="Horizontal" Margin="0,0,0,8">
            <Button x:Name="RefreshMiceButton" Content="Refresh mice"
                   Click="RefreshMiceButton_Click"/>
            <Button x:Name="EnableMultiMouseButton" Content="Enable multi-mouse"
                   Click="EnableMultiMouseButton_Click" Margin="8,0,0,0" IsEnabled="False"/>
            <Button x:Name="DisableMultiMouseButton" Content="Disable multi-mouse"
                   Click="DisableMultiMouseButton_Click" Margin="8,0,0,0" IsEnabled="False"/>
        </StackPanel>

        <TextBlock Grid.Row="8" x:Name="MultiMouseStatusText" Text=""
                   Foreground="Gray" FontSize="12" TextWrapping="Wrap" Margin="0,0,0,12"/>

        <Separator Grid.Row="9" Margin="0,0,0,8"/>

        <TextBlock Grid.Row="10" Text="Two keyboards: bind each keyboard to a different monitor"
                   FontWeight="SemiBold" FontSize="13" Margin="0,4,0,4"/>

        <GroupBox Grid.Row="11" Header="Keyboard → Monitor" Padding="8" Margin="0,0,0,8">
            <StackPanel>
                <TextBlock Text="Assign each keyboard to a monitor. Keys go to the last focused window on that monitor."
                           Foreground="Gray" FontSize="11" TextWrapping="Wrap" Margin="0,0,0,8"/>
                <ListBox x:Name="KeyboardAssignmentsList" Height="100">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Margin="0,2">
                                <TextBlock Text="{Binding Keyboard.Name}" VerticalAlignment="Center" Width="220" TextTrimming="CharacterEllipsis"/>
                                <TextBlock Text=" → " VerticalAlignment="Center"/>
                                <ComboBox ItemsSource="{Binding Monitors}"
                                          SelectedItem="{Binding SelectedMonitor}"
                                          DisplayMemberPath="DisplayName"
                                          Width="200" Margin="4,0,0,0"
                                          VerticalAlignment="Center"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </StackPanel>
        </GroupBox>

        <StackPanel Grid.Row="12" Orientation="Horizontal" Margin="0,0,0,8">
            <Button x:Name="RefreshKeyboardsButton" Content="Refresh keyboards"
                   Click="RefreshKeyboardsButton_Click"/>
            <Button x:Name="EnableMultiKeyboardButton" Content="Enable multi-keyboard"
                   Click="EnableMultiKeyboardButton_Click" Margin="8,0,0,0" IsEnabled="False"/>
            <Button x:Name="DisableMultiKeyboardButton" Content="Disable multi-keyboard"
                   Click="DisableMultiKeyboardButton_Click" Margin="8,0,0,0" IsEnabled="False"/>
        </StackPanel>

        <TextBlock Grid.Row="13" x:Name="MultiKeyboardStatusText" Text=""
                   Foreground="Gray" FontSize="12" TextWrapping="Wrap"/>
    </Grid>
</Window>
